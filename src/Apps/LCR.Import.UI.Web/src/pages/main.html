<template>
  <require from="components/pagination-component"></require>
  <require from="resources/value-converters/date-time-value-converter"></require>
  <section class="uk-padding-small uk-background-muted">
    <div class="uk-grid">
      <div>
        <span class="uk-text-normal">Дата загрузки</span>
        <div class="uk-margin-small-top">
          <div class="uk-margin-small">
            <input type="text" class="uk-input uk-form-small" placeholder="От..." />
          </div>
          <div class="uk-margin-small">
            <input type="text" class="uk-input uk-form-small" placeholder="До..." />
          </div>
        </div>
      </div>
      <div>
        <span class="uk-text-normal">Коммутатор</span>
        <select class="uk-select uk-margin-small-top uk-form-small"></select>
      </div>
      <div>
        <span class="uk-text-normal">Пользователь</span>
        <select class="uk-select uk-margin-small-top uk-form-small"></select>
      </div>
    </div>
    <div class="uk-grid">
      <div class="uk-width-1-3"></div>
      <div class="uk-width-1-3"></div>
      <div class="uk-width-1-3 uk-text-right">
        <button class="uk-button uk-button-primary uk-button-small">Поиск</button>
        <button class="uk-button uk-button-default uk-button-small" uk-tooltip="Загрузить новый файл" click.trigger="uploadFile()">
          <span uk-icon="upload"></span>
        </button>
      </div>
    </div>
  </section>
  <section class="uk-margin">
    <pagination-component
                          current-page.bind="paginationData.currentPageNumber"
                          total-pages.bind="paginationData.totalPages"
                          route-config.bind="currentRouteConfig"
                          route-params.bind="currentRouteParams">

    </pagination-component>
    <table class="uk-table uk-table-divider uk-table-striped uk-table-hover">
      <thead>
        <tr>
          <th>
            Дата и время
          </th>
          <th>
            Наименование файла
          </th>
          <th>
            Коммутатор
          </th>
          <th>
            Пользователь
          </th>
          <th>
            Изменено записей
          </th>
          <th>

          </th>
        </tr>
      </thead>
      <tbody>
        <tr repeat.for="entry of uploadHistory">
          <td>
            ${entry.dateUpload | dateTime: 'DD.MM.YYYY HH:mm'}
          </td>
          <td>
            ${entry.fileName}
          </td>
          <td>
            ${entry.switchId}
          </td>
          <td>
            ${entry.userId}
          </td>
          <td>
            ${entry.rowsAffected}
          </td>
          <td>
          </td>
        </tr>
      </tbody>
    </table>
    <template if.bind="isLoadInProggress">
      <div style="position: relative;">
        <div uk-spinner class="uk-position-center"></div>
      </div>
    </template>
  </section>
  <pagination-component current-page.bind="paginationData.currentPageNumber"
                        total-pages.bind="paginationData.totalPages"
                        route-config.bind="currentRouteConfig"
                        route-params.bind="currentRouteParams">
  </pagination-component>
</template>
